{"ast":null,"code":"var _jsxFileName = \"/workspaces/HappyMap/HappyMaps/maps/src/App.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect } from 'react';\nimport './App.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nlet latitudes = [];\nlet longitudes = [];\nlet happinessScores = [];\nlet map, heatmap;\nconst apiKey = process.env.REACT_APP_GOOGLE_MAPS_API_KEY;\nfunction App() {\n  _s();\n  useEffect(() => {\n    const script = document.createElement('script');\n    script.src = `https://maps.googleapis.com/maps/api/js?key=${apiKey}&libraries=visualization`;\n    script.async = true;\n    script.defer = true;\n    script.onload = () => {\n      initMap();\n    };\n    document.head.appendChild(script);\n  }, []);\n  function getEmojiUrl(score) {\n    if (score >= 6) {\n      return \"/emoji/super-happy.png\";\n    } else if (score >= 5) {\n      return \"/emoji/happy.png\";\n    } else if (score >= 4) {\n      return \"/emoji/neutral.png\";\n    } else if (score >= 2) {\n      return \"/emoji/sad.png\";\n    } else {\n      return \"/emoji/super-sad.png\";\n    }\n  }\n  function initMap() {\n    fetch(\"http://localhost:5000/api/emotion\").then(response => response.json()).then(data => {\n      data.forEach(row => {\n        latitudes.push(parseFloat(row.latitude));\n        longitudes.push(parseFloat(row.longitude));\n        happinessScores.push(parseFloat(row.score));\n      });\n      map = new window.google.maps.Map(document.getElementById(\"map\"), {\n        zoom: 5.3,\n        center: {\n          lat: 22.9734,\n          lng: 78.6569\n        },\n        mapTypeId: \"satellite\"\n      });\n      const gradient = [\"rgba(0, 255, 255, 0)\", \"rgba(0, 255, 255, 1)\", \"rgba(0, 191, 255, 1)\", \"rgba(0, 127, 255, 1)\", \"rgba(0, 63, 255, 1)\", \"rgba(0, 0, 255, 1)\", \"rgba(0, 0, 223, 1)\", \"rgba(0, 0, 191, 1)\", \"rgba(0, 0, 159, 1)\", \"rgba(0, 0, 127, 1)\", \"rgba(63, 0, 91, 1)\", \"rgba(127, 0, 63, 1)\", \"rgba(191, 0, 31, 1)\", \"rgba(255, 0, 0, 1)\"];\n      heatmap = new window.google.maps.visualization.HeatmapLayer({\n        data: getPoints(),\n        map: map,\n        gradient: gradient,\n        radius: 30\n      });\n      latitudes.forEach((lat, index) => {\n        const marker = new window.google.maps.Marker({\n          position: {\n            lat: lat,\n            lng: longitudes[index]\n          },\n          map: map,\n          title: `Happiness Score: ${happinessScores[index]}`,\n          icon: {\n            url: getEmojiUrl(happinessScores[index]),\n            scaledSize: new window.google.maps.Size(30, 30)\n          }\n        });\n      });\n      document.getElementById(\"toggle-heatmap\").addEventListener(\"click\", toggleHeatmap);\n      document.getElementById(\"change-opacity\").addEventListener(\"click\", changeOpacity);\n      document.getElementById(\"change-radius\").addEventListener(\"click\", changeRadius);\n    });\n  }\n  function toggleHeatmap() {\n    heatmap.setMap(heatmap.getMap() ? null : map);\n  }\n  function changeRadius() {\n    heatmap.set(\"radius\", heatmap.get(\"radius\") ? null : 40);\n  }\n  function changeOpacity() {\n    heatmap.set(\"opacity\", heatmap.get(\"opacity\") ? null : 0.2);\n  }\n  function getPoints() {\n    return latitudes.map((lat, index) => {\n      return {\n        location: new window.google.maps.LatLng(lat, longitudes[index]),\n        weight: happinessScores[index]\n      };\n    });\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"landing-page\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"content\",\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        className: \"title\",\n        children: \"Happy Maps\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 127,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"subtitle\",\n        children: \"Tagline\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 128,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 126,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"Map\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        id: \"floating-panel\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          id: \"toggle-heatmap\",\n          children: \"Toggle Heatmap\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 133,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          id: \"change-radius\",\n          children: \"Change radius\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 134,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          id: \"change-opacity\",\n          children: \"Change opacity\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 135,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 132,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        id: \"map\",\n        style: {\n          height: '500px',\n          width: '100%'\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 138,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 131,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 125,\n    columnNumber: 5\n  }, this);\n}\n_s(App, \"OD7bBpZva5O2jO+Puf00hKivP7c=\");\n_c = App;\nexport default App;\nvar _c;\n$RefreshReg$(_c, \"App\");","map":{"version":3,"names":["React","useEffect","jsxDEV","_jsxDEV","latitudes","longitudes","happinessScores","map","heatmap","apiKey","process","env","REACT_APP_GOOGLE_MAPS_API_KEY","App","_s","script","document","createElement","src","async","defer","onload","initMap","head","appendChild","getEmojiUrl","score","fetch","then","response","json","data","forEach","row","push","parseFloat","latitude","longitude","window","google","maps","Map","getElementById","zoom","center","lat","lng","mapTypeId","gradient","visualization","HeatmapLayer","getPoints","radius","index","marker","Marker","position","title","icon","url","scaledSize","Size","addEventListener","toggleHeatmap","changeOpacity","changeRadius","setMap","getMap","set","get","location","LatLng","weight","className","children","fileName","_jsxFileName","lineNumber","columnNumber","id","style","height","width","_c","$RefreshReg$"],"sources":["/workspaces/HappyMap/HappyMaps/maps/src/App.js"],"sourcesContent":["import React, { useEffect } from 'react';\r\nimport './App.css';\r\n\r\nlet latitudes = [];\r\nlet longitudes = [];\r\nlet happinessScores = [];\r\nlet map, heatmap;\r\n\r\nconst apiKey = process.env.REACT_APP_GOOGLE_MAPS_API_KEY;\r\n\r\n\r\nfunction App() {\r\n  useEffect(() => {\r\n    const script = document.createElement('script');\r\n    script.src = `https://maps.googleapis.com/maps/api/js?key=${apiKey}&libraries=visualization`;\r\n    script.async = true;\r\n    script.defer = true;\r\n    script.onload = () => {\r\n      initMap();\r\n    };\r\n    document.head.appendChild(script);\r\n  }, []);\r\n\r\n  function getEmojiUrl(score) {\r\n    if (score >= 6) {\r\n      return \"/emoji/super-happy.png\";\r\n    } else if (score >= 5) {\r\n      return \"/emoji/happy.png\";\r\n    } else if (score >= 4) {\r\n      return \"/emoji/neutral.png\";\r\n    } else if (score >= 2) {\r\n      return \"/emoji/sad.png\";\r\n    } else {\r\n      return \"/emoji/super-sad.png\";\r\n    }\r\n  }\r\n\r\n  function initMap() {\r\n    fetch(\"http://localhost:5000/api/emotion\")\r\n      .then(response => response.json())\r\n      .then(data => {\r\n        data.forEach(row => {\r\n          latitudes.push(parseFloat(row.latitude));\r\n          longitudes.push(parseFloat(row.longitude));\r\n          happinessScores.push(parseFloat(row.score));\r\n        });\r\n\r\n        map = new window.google.maps.Map(document.getElementById(\"map\"), {\r\n          zoom: 5.3,\r\n          center: { lat: 22.9734, lng: 78.6569 },\r\n          mapTypeId: \"satellite\",\r\n        });\r\n\r\n        const gradient = [\r\n          \"rgba(0, 255, 255, 0)\",\r\n          \"rgba(0, 255, 255, 1)\",\r\n          \"rgba(0, 191, 255, 1)\",\r\n          \"rgba(0, 127, 255, 1)\",\r\n          \"rgba(0, 63, 255, 1)\",\r\n          \"rgba(0, 0, 255, 1)\",\r\n          \"rgba(0, 0, 223, 1)\",\r\n          \"rgba(0, 0, 191, 1)\",\r\n          \"rgba(0, 0, 159, 1)\",\r\n          \"rgba(0, 0, 127, 1)\",\r\n          \"rgba(63, 0, 91, 1)\",\r\n          \"rgba(127, 0, 63, 1)\",\r\n          \"rgba(191, 0, 31, 1)\",\r\n          \"rgba(255, 0, 0, 1)\",\r\n        ];\r\n\r\n        heatmap = new window.google.maps.visualization.HeatmapLayer({\r\n          data: getPoints(),\r\n          map: map,\r\n          gradient: gradient, \r\n          radius: 30,\r\n        });\r\n        \r\n\r\n    latitudes.forEach((lat, index) => {\r\n      const marker = new window.google.maps.Marker({\r\n        position: { lat: lat, lng: longitudes[index] },\r\n        map: map,\r\n        title: `Happiness Score: ${happinessScores[index]}`,\r\n        icon: {\r\n          url: getEmojiUrl(happinessScores[index]),\r\n          scaledSize: new window.google.maps.Size(30, 30),\r\n        },\r\n      });\r\n    });\r\n\r\n        document\r\n          .getElementById(\"toggle-heatmap\")\r\n          .addEventListener(\"click\", toggleHeatmap);\r\n        document\r\n          .getElementById(\"change-opacity\")\r\n          .addEventListener(\"click\", changeOpacity);\r\n        document\r\n          .getElementById(\"change-radius\")\r\n          .addEventListener(\"click\", changeRadius);\r\n      });\r\n  }\r\n\r\n  function toggleHeatmap() {\r\n    heatmap.setMap(heatmap.getMap() ? null : map);\r\n  }\r\n\r\n  function changeRadius() {\r\n    heatmap.set(\"radius\", heatmap.get(\"radius\") ? null : 40);\r\n  }\r\n\r\n  function changeOpacity() {\r\n    heatmap.set(\"opacity\", heatmap.get(\"opacity\") ? null : 0.2);\r\n  }\r\n\r\n  function getPoints() {\r\n    return latitudes.map((lat, index) => {\r\n      return {\r\n        location: new window.google.maps.LatLng(lat, longitudes[index]),\r\n        weight: happinessScores[index],\r\n      };\r\n    });\r\n  }\r\n\r\n  return (\r\n    <div className=\"landing-page\">\r\n      <div className=\"content\">\r\n        <h1 className=\"title\">Happy Maps</h1>\r\n        <p className=\"subtitle\">Tagline</p>\r\n      </div>\r\n\r\n      <div className='Map'>\r\n        <div id='floating-panel'>\r\n          <button id=\"toggle-heatmap\">Toggle Heatmap</button>\r\n          <button id=\"change-radius\">Change radius</button>\r\n          <button id=\"change-opacity\">Change opacity</button>\r\n        </div>\r\n\r\n        <div id=\"map\" style={{ height: '500px', width: '100%' }}></div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default App;\r\n"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,SAAS,QAAQ,OAAO;AACxC,OAAO,WAAW;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAEnB,IAAIC,SAAS,GAAG,EAAE;AAClB,IAAIC,UAAU,GAAG,EAAE;AACnB,IAAIC,eAAe,GAAG,EAAE;AACxB,IAAIC,GAAG,EAAEC,OAAO;AAEhB,MAAMC,MAAM,GAAGC,OAAO,CAACC,GAAG,CAACC,6BAA6B;AAGxD,SAASC,GAAGA,CAAA,EAAG;EAAAC,EAAA;EACbb,SAAS,CAAC,MAAM;IACd,MAAMc,MAAM,GAAGC,QAAQ,CAACC,aAAa,CAAC,QAAQ,CAAC;IAC/CF,MAAM,CAACG,GAAG,GAAG,+CAA+CT,MAAM,0BAA0B;IAC5FM,MAAM,CAACI,KAAK,GAAG,IAAI;IACnBJ,MAAM,CAACK,KAAK,GAAG,IAAI;IACnBL,MAAM,CAACM,MAAM,GAAG,MAAM;MACpBC,OAAO,CAAC,CAAC;IACX,CAAC;IACDN,QAAQ,CAACO,IAAI,CAACC,WAAW,CAACT,MAAM,CAAC;EACnC,CAAC,EAAE,EAAE,CAAC;EAEN,SAASU,WAAWA,CAACC,KAAK,EAAE;IAC1B,IAAIA,KAAK,IAAI,CAAC,EAAE;MACd,OAAO,wBAAwB;IACjC,CAAC,MAAM,IAAIA,KAAK,IAAI,CAAC,EAAE;MACrB,OAAO,kBAAkB;IAC3B,CAAC,MAAM,IAAIA,KAAK,IAAI,CAAC,EAAE;MACrB,OAAO,oBAAoB;IAC7B,CAAC,MAAM,IAAIA,KAAK,IAAI,CAAC,EAAE;MACrB,OAAO,gBAAgB;IACzB,CAAC,MAAM;MACL,OAAO,sBAAsB;IAC/B;EACF;EAEA,SAASJ,OAAOA,CAAA,EAAG;IACjBK,KAAK,CAAC,mCAAmC,CAAC,CACvCC,IAAI,CAACC,QAAQ,IAAIA,QAAQ,CAACC,IAAI,CAAC,CAAC,CAAC,CACjCF,IAAI,CAACG,IAAI,IAAI;MACZA,IAAI,CAACC,OAAO,CAACC,GAAG,IAAI;QAClB7B,SAAS,CAAC8B,IAAI,CAACC,UAAU,CAACF,GAAG,CAACG,QAAQ,CAAC,CAAC;QACxC/B,UAAU,CAAC6B,IAAI,CAACC,UAAU,CAACF,GAAG,CAACI,SAAS,CAAC,CAAC;QAC1C/B,eAAe,CAAC4B,IAAI,CAACC,UAAU,CAACF,GAAG,CAACP,KAAK,CAAC,CAAC;MAC7C,CAAC,CAAC;MAEFnB,GAAG,GAAG,IAAI+B,MAAM,CAACC,MAAM,CAACC,IAAI,CAACC,GAAG,CAACzB,QAAQ,CAAC0B,cAAc,CAAC,KAAK,CAAC,EAAE;QAC/DC,IAAI,EAAE,GAAG;QACTC,MAAM,EAAE;UAAEC,GAAG,EAAE,OAAO;UAAEC,GAAG,EAAE;QAAQ,CAAC;QACtCC,SAAS,EAAE;MACb,CAAC,CAAC;MAEF,MAAMC,QAAQ,GAAG,CACf,sBAAsB,EACtB,sBAAsB,EACtB,sBAAsB,EACtB,sBAAsB,EACtB,qBAAqB,EACrB,oBAAoB,EACpB,oBAAoB,EACpB,oBAAoB,EACpB,oBAAoB,EACpB,oBAAoB,EACpB,oBAAoB,EACpB,qBAAqB,EACrB,qBAAqB,EACrB,oBAAoB,CACrB;MAEDxC,OAAO,GAAG,IAAI8B,MAAM,CAACC,MAAM,CAACC,IAAI,CAACS,aAAa,CAACC,YAAY,CAAC;QAC1DnB,IAAI,EAAEoB,SAAS,CAAC,CAAC;QACjB5C,GAAG,EAAEA,GAAG;QACRyC,QAAQ,EAAEA,QAAQ;QAClBI,MAAM,EAAE;MACV,CAAC,CAAC;MAGNhD,SAAS,CAAC4B,OAAO,CAAC,CAACa,GAAG,EAAEQ,KAAK,KAAK;QAChC,MAAMC,MAAM,GAAG,IAAIhB,MAAM,CAACC,MAAM,CAACC,IAAI,CAACe,MAAM,CAAC;UAC3CC,QAAQ,EAAE;YAAEX,GAAG,EAAEA,GAAG;YAAEC,GAAG,EAAEzC,UAAU,CAACgD,KAAK;UAAE,CAAC;UAC9C9C,GAAG,EAAEA,GAAG;UACRkD,KAAK,EAAE,oBAAoBnD,eAAe,CAAC+C,KAAK,CAAC,EAAE;UACnDK,IAAI,EAAE;YACJC,GAAG,EAAElC,WAAW,CAACnB,eAAe,CAAC+C,KAAK,CAAC,CAAC;YACxCO,UAAU,EAAE,IAAItB,MAAM,CAACC,MAAM,CAACC,IAAI,CAACqB,IAAI,CAAC,EAAE,EAAE,EAAE;UAChD;QACF,CAAC,CAAC;MACJ,CAAC,CAAC;MAEE7C,QAAQ,CACL0B,cAAc,CAAC,gBAAgB,CAAC,CAChCoB,gBAAgB,CAAC,OAAO,EAAEC,aAAa,CAAC;MAC3C/C,QAAQ,CACL0B,cAAc,CAAC,gBAAgB,CAAC,CAChCoB,gBAAgB,CAAC,OAAO,EAAEE,aAAa,CAAC;MAC3ChD,QAAQ,CACL0B,cAAc,CAAC,eAAe,CAAC,CAC/BoB,gBAAgB,CAAC,OAAO,EAAEG,YAAY,CAAC;IAC5C,CAAC,CAAC;EACN;EAEA,SAASF,aAAaA,CAAA,EAAG;IACvBvD,OAAO,CAAC0D,MAAM,CAAC1D,OAAO,CAAC2D,MAAM,CAAC,CAAC,GAAG,IAAI,GAAG5D,GAAG,CAAC;EAC/C;EAEA,SAAS0D,YAAYA,CAAA,EAAG;IACtBzD,OAAO,CAAC4D,GAAG,CAAC,QAAQ,EAAE5D,OAAO,CAAC6D,GAAG,CAAC,QAAQ,CAAC,GAAG,IAAI,GAAG,EAAE,CAAC;EAC1D;EAEA,SAASL,aAAaA,CAAA,EAAG;IACvBxD,OAAO,CAAC4D,GAAG,CAAC,SAAS,EAAE5D,OAAO,CAAC6D,GAAG,CAAC,SAAS,CAAC,GAAG,IAAI,GAAG,GAAG,CAAC;EAC7D;EAEA,SAASlB,SAASA,CAAA,EAAG;IACnB,OAAO/C,SAAS,CAACG,GAAG,CAAC,CAACsC,GAAG,EAAEQ,KAAK,KAAK;MACnC,OAAO;QACLiB,QAAQ,EAAE,IAAIhC,MAAM,CAACC,MAAM,CAACC,IAAI,CAAC+B,MAAM,CAAC1B,GAAG,EAAExC,UAAU,CAACgD,KAAK,CAAC,CAAC;QAC/DmB,MAAM,EAAElE,eAAe,CAAC+C,KAAK;MAC/B,CAAC;IACH,CAAC,CAAC;EACJ;EAEA,oBACElD,OAAA;IAAKsE,SAAS,EAAC,cAAc;IAAAC,QAAA,gBAC3BvE,OAAA;MAAKsE,SAAS,EAAC,SAAS;MAAAC,QAAA,gBACtBvE,OAAA;QAAIsE,SAAS,EAAC,OAAO;QAAAC,QAAA,EAAC;MAAU;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAI,CAAC,eACrC3E,OAAA;QAAGsE,SAAS,EAAC,UAAU;QAAAC,QAAA,EAAC;MAAO;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAG,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAChC,CAAC,eAEN3E,OAAA;MAAKsE,SAAS,EAAC,KAAK;MAAAC,QAAA,gBAClBvE,OAAA;QAAK4E,EAAE,EAAC,gBAAgB;QAAAL,QAAA,gBACtBvE,OAAA;UAAQ4E,EAAE,EAAC,gBAAgB;UAAAL,QAAA,EAAC;QAAc;UAAAC,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAQ,CAAC,eACnD3E,OAAA;UAAQ4E,EAAE,EAAC,eAAe;UAAAL,QAAA,EAAC;QAAa;UAAAC,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAQ,CAAC,eACjD3E,OAAA;UAAQ4E,EAAE,EAAC,gBAAgB;UAAAL,QAAA,EAAC;QAAc;UAAAC,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAQ,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAChD,CAAC,eAEN3E,OAAA;QAAK4E,EAAE,EAAC,KAAK;QAACC,KAAK,EAAE;UAAEC,MAAM,EAAE,OAAO;UAAEC,KAAK,EAAE;QAAO;MAAE;QAAAP,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAM,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAC5D,CAAC;EAAA;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACH,CAAC;AAEV;AAAChE,EAAA,CAlIQD,GAAG;AAAAsE,EAAA,GAAHtE,GAAG;AAoIZ,eAAeA,GAAG;AAAC,IAAAsE,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}